# 背景
AnkiRepository 插件是 Anki 与 Notion 之间同步笔记的插件,该插件的V1.0版本见AnkiRepository_V1.0文件夹。

# 问题待解决

AnkiRepository_V1.0 这个文件夹是重构后的插件代码的工作目录，重构后的插件能够解决旧版本插件的以下问题。
- **将插件改为OOP**  
  把插件的运行过程再捋清楚，尽量提高代码的可维护性和可拓展性。未来可能还需要拓展插件，实现 Anki 与 Get 笔记之间的互导。

- **导入导出笔记的性能优化**  
  导入导出笔记时，不应导致 Anki 卡顿。导入应是一个新的进程，不应阻塞主进程。

- **模板销毁情况下的恢复测试**  
  测试在模板被销毁的情况下，不能使用 Notion 中的笔记来恢复原始卡片。因此需添加是否将模板导入Notion备份以便将来恢复模板的选项，如果用户勾选，则导入笔记时自动判断是否需要导入模板（如果已有，则不重复导入）。模板单独占一条笔记（想办法通过代码实现在notion中自动隐藏这条笔记）。如果 Anki 中模板名无法找到笔记模板，应去找 Notion 中的模板笔记。

- **Notion 正文中重复卡片内容**  
  在 Notion 正文中重复卡片内容，方便搜索（用户自己添加的 Notion 正文应在这之后）。

- **暂停笔记导入 Anki 的到期日问题**  
  暂停笔记导入 Anki 时，到期日不对，为 2024 年 8 月 28 日，实际应改为今日更合适（无法设置过去为到期日）。

- **多媒体文件转化为 URL**  
  改进 Leo 的七牛云，将多媒体文件转化为 URL。

- **加入多进程支持**  
  加入多进程支持以提高性能。

- **重复笔记问题**  
  首字段都为空且模板名都相同的情况下，也是重复笔记——目前无法解决。